#!/usr/bin/env bb

(require '[babashka.deps :as deps]
         '[clojure.edn :as edn])

(deps/add-deps '{:deps {io.github.athos/task-jockey {:git/sha "1401f25fb4b8da7e28ed407cc30f86d39cefd10f"}}})

(require 'task-jockey.cli)

(defn -main [command & args]
  (let [op (ns-resolve 'task-jockey.cli (symbol command))
        opts (into {} (comp (map edn/read-string) (partition-all 2)) args)]
    (op opts)))

(apply -main *command-line-args*)
